(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();function ge(){}function Lt(e){return e()}function pt(){return Object.create(null)}function ve(e){e.forEach(Lt)}function St(e){return typeof e=="function"}function Ce(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let Fe;function mt(e,n){return Fe||(Fe=document.createElement("a")),Fe.href=n,e===Fe.href}function Jt(e){return Object.keys(e).length===0}function Pt(e,...n){if(e==null)return ge;const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function O(e,n,t){e.$$.on_destroy.push(Pt(n,t))}function oe(e,n,t){return e.set(t),n}const zt=typeof window<"u";let gt=zt?()=>window.performance.now():()=>Date.now(),Mt=zt?e=>requestAnimationFrame(e):ge;const xe=new Set;function Nt(e){xe.forEach(n=>{n.c(e)||(xe.delete(n),n.f())}),xe.size!==0&&Mt(Nt)}function xt(e){let n;return xe.size===0&&Mt(Nt),{promise:new Promise(t=>{xe.add(n={c:e,f:t})}),abort(){xe.delete(n)}}}function d(e,n){e.appendChild(n)}function re(e,n,t){e.insertBefore(n,t||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Ct(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function v(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function C(){return R(" ")}function ft(){return R("")}function fe(e,n,t,s){return e.addEventListener(n,t,s),()=>e.removeEventListener(n,t,s)}function M(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function It(e){return Array.from(e.childNodes)}function ue(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}function p(e,n,t,s){t===null?e.style.removeProperty(n):e.style.setProperty(n,t,s?"important":"")}let Qe;function Wt(){if(Qe===void 0){Qe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qe=!0}}return Qe}function Bt(e,n){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=v("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=Wt();let r;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=fe(window,"message",i=>{i.source===s.contentWindow&&n()})):(s.src="about:blank",s.onload=()=>{r=fe(s.contentWindow,"resize",n)}),d(e,s),()=>{(o||r&&s.contentWindow)&&r(),ee(s)}}let Be;function Ie(e){Be=e}function jt(){if(!Be)throw new Error("Function called outside component initialization");return Be}function Ot(e){jt().$$.on_mount.push(e)}function Gt(e){jt().$$.on_destroy.push(e)}const Je=[],ht=[],Ke=[],_t=[],Ht=Promise.resolve();let lt=!1;function Zt(){lt||(lt=!0,Ht.then(qt))}function $e(e){Ke.push(e)}const it=new Set;let Ae=0;function qt(){if(Ae!==0)return;const e=Be;do{try{for(;Ae<Je.length;){const n=Je[Ae];Ae++,Ie(n),Rt(n.$$)}}catch(n){throw Je.length=0,Ae=0,n}for(Ie(null),Je.length=0,Ae=0;ht.length;)ht.pop()();for(let n=0;n<Ke.length;n+=1){const t=Ke[n];it.has(t)||(it.add(t),t())}Ke.length=0}while(Je.length);for(;_t.length;)_t.pop()();lt=!1,it.clear(),Ie(e)}function Rt(e){if(e.fragment!==null){e.update(),ve(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach($e)}}const Ve=new Set;let je;function Ft(){je={r:0,c:[],p:je}}function Qt(){je.r||ve(je.c),je=je.p}function $(e,n){e&&e.i&&(Ve.delete(e),e.i(n))}function se(e,n,t,s){if(e&&e.o){if(Ve.has(e))return;Ve.add(e),je.c.push(()=>{Ve.delete(e),s&&(t&&e.d(1),s())}),e.o(n)}else s&&s()}function de(e){e&&e.c()}function ie(e,n,t,s){const{fragment:o,after_update:r}=e.$$;o&&o.m(n,t),s||$e(()=>{const i=e.$$.on_mount.map(Lt).filter(St);e.$$.on_destroy?e.$$.on_destroy.push(...i):ve(i),e.$$.on_mount=[]}),r.forEach($e)}function le(e,n){const t=e.$$;t.fragment!==null&&(ve(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Kt(e,n){e.$$.dirty[0]===-1&&(Je.push(e),Zt(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function Ge(e,n,t,s,o,r,i,c=[-1]){const w=Be;Ie(e);const l=e.$$={fragment:null,ctx:[],props:r,update:ge,not_equal:o,bound:pt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(w?w.$$.context:[])),callbacks:pt(),dirty:c,skip_bound:!1,root:n.target||w.$$.root};i&&i(l.root);let f=!1;if(l.ctx=t?t(e,n.props||{},(u,E,...g)=>{const S=g.length?g[0]:E;return l.ctx&&o(l.ctx[u],l.ctx[u]=S)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](S),f&&Kt(e,u)),E}):[],l.update(),f=!0,ve(l.before_update),l.fragment=s?s(l.ctx):!1,n.target){if(n.hydrate){const u=It(n.target);l.fragment&&l.fragment.l(u),u.forEach(ee)}else l.fragment&&l.fragment.c();n.intro&&$(e.$$.fragment),ie(e,n.target,n.anchor,n.customElement),qt()}Ie(w)}class He{$destroy(){le(this,1),this.$destroy=ge}$on(n,t){if(!St(t))return ge;const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(t),()=>{const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}$set(n){this.$$set&&!Jt(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const De=[];function st(e,n){return{subscribe:he(e,n).subscribe}}function he(e,n=ge){let t;const s=new Set;function o(c){if(Ce(e,c)&&(e=c,t)){const w=!De.length;for(const l of s)l[1](),De.push(l,e);if(w){for(let l=0;l<De.length;l+=2)De[l][0](De[l+1]);De.length=0}}}function r(c){o(c(e))}function i(c,w=ge){const l=[c,w];return s.add(l),s.size===1&&(t=n(o)||ge),c(e),()=>{s.delete(l),s.size===0&&(t(),t=null)}}return{set:o,update:r,subscribe:i}}function wt(e){return Object.prototype.toString.call(e)==="[object Date]"}function ut(e,n,t,s){if(typeof t=="number"||wt(t)){const o=s-t,r=(t-n)/(e.dt||1/60),i=e.opts.stiffness*o,c=e.opts.damping*r,w=(i-c)*e.inv_mass,l=(r+w)*e.dt;return Math.abs(l)<e.opts.precision&&Math.abs(o)<e.opts.precision?s:(e.settled=!1,wt(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((o,r)=>ut(e,n[r],t[r],s[r]));if(typeof t=="object"){const o={};for(const r in t)o[r]=ut(e,n[r],t[r],s[r]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function Tt(e,n={}){const t=he(e),{stiffness:s=.15,damping:o=.8,precision:r=.01}=n;let i,c,w,l=e,f=e,u=1,E=0,g=!1;function S(X,b={}){f=X;const N=w={};return e==null||b.hard||y.stiffness>=1&&y.damping>=1?(g=!0,i=gt(),l=X,t.set(e=f),Promise.resolve()):(b.soft&&(E=1/((b.soft===!0?.5:+b.soft)*60),u=0),c||(i=gt(),g=!1,c=xt(k=>{if(g)return g=!1,c=null,!1;u=Math.min(u+E,1);const q={inv_mass:u,opts:y,settled:!0,dt:(k-i)*60/1e3},A=ut(q,l,e,f);return i=k,l=e,t.set(e=A),q.settled&&(c=null),!q.settled})),new Promise(k=>{c.promise.then(()=>{N===w&&k()})}))}const y={set:S,update:(X,b)=>S(X(f,e),b),subscribe:t.subscribe,stiffness:s,damping:o,precision:r};return y}const Vt="assets/tile00-5d5331e2.svg",Ut="assets/tile01-e7b4c986.svg",$t="assets/tile02-5ef45a2a.svg",en="assets/tile03-7261b5d7.svg",tn="assets/tile04-d0d49acb.svg",nn="assets/tile05-06e93071.svg",on="assets/tile06-bed8cf84.svg",sn="assets/tile07-d3ed7d20.svg",rn="assets/tile08-03055187.svg",ln="assets/tile09-08030fc9.svg",un="assets/tile10-053d74e0.svg",Me=64,et=32,Ye=he(JSON.parse(localStorage.getItem("zoomfactor"))||1);Ye.subscribe(e=>localStorage.zoomfactor=JSON.stringify(e));const tt=he(0),We=he(!1),nt=he(JSON.parse(localStorage.getItem("nextid"))||0);nt.subscribe(e=>localStorage.nextid=JSON.stringify(e));const Oe=he(JSON.parse(localStorage.getItem("grid"))||{});Oe.subscribe(e=>localStorage.grid=JSON.stringify(e));const ke=he(JSON.parse(localStorage.getItem("pieces"))||[]);ke.subscribe(e=>localStorage.pieces=JSON.stringify(e));const ot=he(JSON.parse(localStorage.getItem("bestsquare"))||0);ot.subscribe(e=>localStorage.bestsquare=JSON.stringify(e));const Pe=he(0),Ue=he({}),qe=he(JSON.parse(localStorage.getItem("camerax"))||0),Te=he(JSON.parse(localStorage.getItem("cameray"))||0);qe.subscribe(e=>localStorage.camerax=JSON.stringify(e));Te.subscribe(e=>localStorage.cameray=JSON.stringify(e));const Yt=st("jigsaw"),Xt=st([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:0,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:0,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);st([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:4,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:4,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);const At=st([Vt,Ut,$t,en,tn,nn,on,sn,rn,ln,un]);function fn(){qe.set(0),Te.set(0),Ye.set(1),Oe.set({}),ke.set([]),nt.set(0),Ue.set({}),Pe.set(0)}function cn(e){let n,t=(e[2]<et?"":e[0])+"",s,o,r,i,c,w,l=e[1]&&bt(e);return{c(){n=v("div"),s=R(t),r=C(),l&&l.c(),i=ft(),M(n,"class","piece svelte-rswga4"),M(n,"style",o="width: "+e[13]+"px; height: "+e[3]+"px; background-image: url("+e[11]+"); left: "+0+"px; top: "+e[12]+"px; transform: translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px); line-height: "+e[3]+"px; "+(e[1]?"z-index: 3; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(e[7]?"hidden":"visible"))},m(f,u){re(f,n,u),d(n,s),re(f,r,u),l&&l.m(f,u),re(f,i,u),c||(w=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(f,u){u[0]&5&&t!==(t=(f[2]<et?"":f[0])+"")&&ue(s,t),u[0]&112794&&o!==(o="width: "+f[13]+"px; height: "+f[3]+"px; background-image: url("+f[11]+"); left: "+0+"px; top: "+f[12]+"px; transform: translate("+(f[4].x+f[15])+"px,"+(f[4].y+f[16])+"px); line-height: "+f[3]+"px; "+(f[1]?"z-index: 3; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(f[7]?"hidden":"visible"))&&M(n,"style",o),f[1]?l?l.p(f,u):(l=bt(f),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(f){f&&ee(n),f&&ee(r),l&&l.d(f),f&&ee(i),c=!1,ve(w)}}}function dn(e){let n,t,s,o,r,i=e[8].u+"",c,w,l,f,u,E=e[8].l+"",g,S,y,X=e[8].r+"",b,N,k,q,A,P=e[8].d+"",T,I,Y,W;return{c(){n=v("div"),t=v("table"),s=v("tr"),o=v("td"),r=v("td"),c=R(i),w=v("td"),l=C(),f=v("tr"),u=v("td"),g=R(E),S=v("td"),y=v("td"),b=R(X),N=C(),k=v("tr"),q=v("td"),A=v("td"),T=R(P),I=v("td"),M(t,"class","table svelte-rswga4"),M(n,"class","piece box svelte-rswga4"),p(n,"width",e[2]+"px"),p(n,"height",e[2]+"px"),p(n,"left",0+"px"),p(n,"top",0+"px"),p(n,"line-height",e[2]/4+"px"),p(n,"cursor",e[1]?"move":"auto"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)")},m(L,z){re(L,n,z),d(n,t),d(t,s),d(s,o),d(s,r),d(r,c),d(s,w),d(t,l),d(t,f),d(f,u),d(u,g),d(f,S),d(f,y),d(y,b),d(t,N),d(t,k),d(k,q),d(k,A),d(A,T),d(k,I),Y||(W=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],Y=!0)},p(L,z){z[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),z[0]&256&&E!==(E=L[8].l+"")&&ue(g,E),z[0]&256&&X!==(X=L[8].r+"")&&ue(b,X),z[0]&256&&P!==(P=L[8].d+"")&&ue(T,P),z[0]&4&&p(n,"width",L[2]+"px"),z[0]&4&&p(n,"height",L[2]+"px"),z[0]&4&&p(n,"line-height",L[2]/4+"px"),z[0]&2&&p(n,"cursor",L[1]?"move":"auto"),z[0]&98320&&p(n,"transform","translate("+(L[4].x+L[15])+"px,"+(L[4].y+L[16])+"px)")},d(L){L&&ee(n),Y=!1,ve(W)}}}function bt(e){let n;return{c(){n=v("div"),M(n,"class","piece svelte-rswga4"),p(n,"width",e[13]+"px"),p(n,"height",e[3]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","2"),p(n,"line-height",e[3]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(t,s){re(t,n,s)},p(t,s){s[0]&8192&&p(n,"width",t[13]+"px"),s[0]&8&&p(n,"height",t[3]+"px"),s[0]&2048&&p(n,"background-image","url("+t[11]+")"),s[0]&4096&&p(n,"top",t[12]+"px"),s[0]&8&&p(n,"line-height",t[3]+"px"),s[0]&1600&&p(n,"filter","drop-shadow("+t[10]+"px "+t[9]+"px 1px "+(t[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),s[0]&98320&&p(n,"transform","translate("+(t[4].x+t[15])+"px,"+(t[4].y+t[16])+"px)"),s[0]&128&&p(n,"visibility",t[7]?"hidden":"visible")},d(t){t&&ee(n)}}}function an(e){let n;function t(r,i){if(r[14]=="labels")return dn;if(r[14]=="jigsaw")return cn}let s=t(e),o=s&&s(e);return{c(){o&&o.c(),n=ft()},m(r,i){o&&o.m(r,i),re(r,n,i)},p(r,i){s===(s=t(r))&&o?o.p(r,i):(o&&o.d(1),o=s&&s(r),o&&(o.c(),o.m(n.parentNode,n)))},i:ge,o:ge,d(r){o&&o.d(r),r&&ee(n)}}}const pn=0,mn=1,gn=2;function hn(e,n,t){let s,o,r,i,c,w,l,f,u,E,g,S,y,X,b,N,k,q,A,P,T,I,Y,W,L,z,m,j;O(e,ke,a=>t(37,b=a)),O(e,Oe,a=>t(38,N=a)),O(e,Ue,a=>t(39,k=a)),O(e,Xt,a=>t(27,q=a)),O(e,We,a=>t(40,A=a)),O(e,Ye,a=>t(28,P=a)),O(e,Pe,a=>t(41,T=a)),O(e,ot,a=>t(42,I=a)),O(e,tt,a=>t(29,W=a)),O(e,At,a=>t(30,L=a)),O(e,Yt,a=>t(14,z=a)),O(e,qe,a=>t(15,m=a)),O(e,Te,a=>t(16,j=a));let{pid:D}=n,{gridx:K}=n,{gridy:V}=n,{type:U}=n,F,ce,te=D,x=Tt({x:K*o,y:V*o},{stiffness:1,damping:1});O(e,x,a=>t(4,Y=a));let _e=!1,ae=[K,V],G=[K,V],we=!1;Ot(Ne);function Ne(){me(),pe(u,E)}function pe(a,B){let Q=B,Ee=0,Xe=0;for(;Q==B||[a,Q]in N;){let J=a;for(Q==B&&!([a,B]in N)&&(J=a-1);[J,Q]in N;){let be=k[[J,Q+1]]||0,Re=k[[J+1,Q+1]]||0,Dt=k[[J+1,Q]]||0,rt=1+Math.min(be,Re,Dt),at=k[[J,Q]];at>Xe&&(Xe=at),oe(Ue,k[[J,Q]]=rt,k),rt>Ee&&(Ee=rt),J--}Q--}if(Xe>Ee){let J=0;for(let be in k){let Re=k[be];Re>J&&(J=Re)}return oe(Pe,T=J,T),pn}if(Ee>I)return oe(ot,I=Ee,I),oe(Pe,T=Ee,T),gn;if(Ee>T)return oe(Pe,T=Ee,T),mn}Ye.subscribe(me);function me(a){const B=Z();B!==void 0&&(t(5,x.stiffness=t(5,x.damping=1,x),x),x.set({x:B.gx*Me*P,y:B.gy*Me*P}))}function Le(a,B,Q){Q?(t(5,x.stiffness=.3,x),t(5,x.damping=.7,x)):t(5,x.stiffness=t(5,x.damping=1,x),x),x.set({x:a*o,y:B*o}),F=a*o,t(22,ce=B*o)}function h(a){F=a.clientX,t(22,ce=a.clientY),window.addEventListener("mousemove",Se),window.addEventListener("mouseup",ct),ne()}function ne(){t(5,x.stiffness=t(5,x.damping=1,x),x),t(1,we=!0),delete N[[u,E]],delete k[[u,E]],pe(u,E),G=t(23,ae=[u,E])}function H(a){const B=a.touches;if(A)return;a.preventDefault();const Q=B[0];F=Q.clientX,t(22,ce=Q.clientY),window.addEventListener("touchmove",ze),window.addEventListener("touchcancel",Ze),window.addEventListener("touchend",Ze),ne()}function Se(a){_(a.clientX,a.clientY)}function ze(a){if(A)return;a.preventDefault();const Q=a.changedTouches[0];_(Q.clientX,Q.clientY)}function _(a,B){const Q=a-F,Ee=B-ce;F=a,t(22,ce=B),x.update(J=>({x:J.x+Q,y:J.y+Ee}));const Xe=[u,E];if(!(Xe in N)){t(6,_e=!1),t(23,ae=Xe);let J=[u-1,E];if(J in N){const be=N[J];if(q[be].r!=s.l){t(6,_e=!0);return}}if(J=[u+1,E],J in N){const be=N[J];if(q[be].l!=s.r){t(6,_e=!0);return}}if(J=[u,E-1],J in N){const be=N[J];if(q[be].d!=s.u){t(6,_e=!0);return}}if(J=[u,E+1],J in N){const be=N[J];if(q[be].u!=s.d){t(6,_e=!0);return}}G=ae}}function Z(){te>=b.length&&(te=b.length-1);let a=b[te];for(;te>=0&&a.id!=D;)te--,a=b[te];if(te>=0)return a}function ct(a){window.removeEventListener("mousemove",Se),window.removeEventListener("mouseup",ct),dt()}function Ze(a){a.preventDefault(),window.removeEventListener("touchmove",ze),window.removeEventListener("touchcancel",Ze),window.removeEventListener("touchend",Ze),dt()}function dt(){if(t(1,we=!1),f){Z();const a=b.length-1;let B=b[a];oe(ke,b[te]=B,b),Le(B.gx,B.gy,!1),t(19,D=B.id),b.pop(),ke.set(b),Oe.set(N),Ue.set(k);return}Le(G[0],G[1],!0),oe(Oe,N[G]=U,N),pe(G[0],G[1]),Z(),oe(ke,b[te]={id:D,type:U,gx:G[0],gy:G[1]},b)}return e.$$set=a=>{"pid"in a&&t(19,D=a.pid),"gridx"in a&&t(20,K=a.gridx),"gridy"in a&&t(21,V=a.gridy),"type"in a&&t(0,U=a.type)},e.$$.update=()=>{e.$$.dirty[0]&134217729&&t(8,s=q[U]),e.$$.dirty[0]&268435456&&t(2,o=Me*P),e.$$.dirty[0]&4&&t(13,r=o*68/60),e.$$.dirty[0]&4&&t(3,i=o*75.16/60),e.$$.dirty[0]&12&&t(12,c=o-i),e.$$.dirty[0]&1073741825&&t(11,w=L[U]),e.$$.dirty[0]&536870912&&t(26,l=W),e.$$.dirty[0]&71303170&&t(7,f=we&&ce>l),e.$$.dirty[0]&20&&(u=Math.round(Y.x/o)),e.$$.dirty[0]&20&&(E=Math.round(Y.y/o)),e.$$.dirty[0]&8388612&&t(25,g=ae[0]*o),e.$$.dirty[0]&8388612&&t(24,S=ae[1]*o),e.$$.dirty[0]&33554448&&t(10,y=g-Y.x),e.$$.dirty[0]&16777232&&t(9,X=S-Y.y)},[U,we,o,i,Y,x,_e,f,s,X,y,w,c,r,z,m,j,h,H,D,K,V,ce,ae,S,g,l,q,P,W,L]}class _n extends He{constructor(n){super(),Ge(this,n,hn,an,Ce,{pid:19,gridx:20,gridy:21,type:0},null,[-1,-1])}}function wn(e){let n,t,s,o,r,i,c,w;return{c(){n=v("div"),t=v("img"),o=C(),r=v("div"),i=R(e[0]),M(t,"class","image nodrag svelte-1yh12d3"),M(t,"draggable","false"),mt(t.src,s=e[11])||M(t,"src",s),M(r,"class","imagelabel svelte-1yh12d3"),M(n,"class","piece nodrag static svelte-1yh12d3"),M(n,"draggable","false"),p(n,"z-index","4"),p(n,"cursor","auto")},m(l,f){re(l,n,f),d(n,t),d(n,o),d(n,r),d(r,i),c||(w=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(l,f){f[0]&2048&&!mt(t.src,s=l[11])&&M(t,"src",s),f[0]&1&&ue(i,l[0])},d(l){l&&ee(n),c=!1,ve(w)}}}function bn(e){let n,t,s,o,r,i=e[8].u+"",c,w,l,f,u,E=e[8].l+"",g,S,y,X=e[8].r+"",b,N,k,q,A,P=e[8].d+"",T,I,Y,W;return{c(){n=v("div"),t=v("table"),s=v("tr"),o=v("td"),r=v("td"),c=R(i),w=v("td"),l=C(),f=v("tr"),u=v("td"),g=R(E),S=v("td"),y=v("td"),b=R(X),N=C(),k=v("tr"),q=v("td"),A=v("td"),T=R(P),I=v("td"),M(t,"class","table svelte-1yh12d3"),M(n,"class","piece box static svelte-1yh12d3"),p(n,"width",e[1]+"px"),p(n,"height",e[1]+"px"),p(n,"line-height",e[1]/4+"px"),p(n,"cursor",e[6]?"move":"auto"),p(n,"z-index","4")},m(L,z){re(L,n,z),d(n,t),d(t,s),d(s,o),d(s,r),d(r,c),d(s,w),d(t,l),d(t,f),d(f,u),d(u,g),d(f,S),d(f,y),d(y,b),d(t,N),d(t,k),d(k,q),d(k,A),d(A,T),d(k,I),Y||(W=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[17])],Y=!0)},p(L,z){z[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),z[0]&256&&E!==(E=L[8].l+"")&&ue(g,E),z[0]&256&&X!==(X=L[8].r+"")&&ue(b,X),z[0]&256&&P!==(P=L[8].d+"")&&ue(T,P),z[0]&2&&p(n,"width",L[1]+"px"),z[0]&2&&p(n,"height",L[1]+"px"),z[0]&2&&p(n,"line-height",L[1]/4+"px"),z[0]&64&&p(n,"cursor",L[6]?"move":"auto")},d(L){L&&ee(n),Y=!1,ve(W)}}}function yt(e){let n,t=(e[1]<et?"":e[0])+"",s;return{c(){n=v("div"),s=R(t),M(n,"class","piece svelte-1yh12d3"),p(n,"width",e[13]+"px"),p(n,"height",e[2]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"background-size",e[13]+"px "+e[2]+"px"),p(n,"background-repeat","no-repeat"),p(n,"position","absolute"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","5"),p(n,"line-height",e[2]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[3].x+e[15])+"px,"+(e[3].y+e[14])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(o,r){re(o,n,r),d(n,s)},p(o,r){r[0]&3&&t!==(t=(o[1]<et?"":o[0])+"")&&ue(s,t),r[0]&8192&&p(n,"width",o[13]+"px"),r[0]&4&&p(n,"height",o[2]+"px"),r[0]&2048&&p(n,"background-image","url("+o[11]+")"),r[0]&8196&&p(n,"background-size",o[13]+"px "+o[2]+"px"),r[0]&4096&&p(n,"top",o[12]+"px"),r[0]&4&&p(n,"line-height",o[2]+"px"),r[0]&1568&&p(n,"filter","drop-shadow("+o[10]+"px "+o[9]+"px 1px "+(o[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),r[0]&49160&&p(n,"transform","translate("+(o[3].x+o[15])+"px,"+(o[3].y+o[14])+"px)"),r[0]&128&&p(n,"visibility",o[7]?"hidden":"visible")},d(o){o&&ee(n)}}}function yn(e){let n,t;function s(c,w){if(c[16]=="labels")return bn;if(c[16]=="jigsaw")return wn}let o=s(e),r=o&&o(e),i=e[6]&&yt(e);return{c(){r&&r.c(),n=C(),i&&i.c(),t=ft()},m(c,w){r&&r.m(c,w),re(c,n,w),i&&i.m(c,w),re(c,t,w)},p(c,w){o===(o=s(c))&&r?r.p(c,w):(r&&r.d(1),r=o&&o(c),r&&(r.c(),r.m(n.parentNode,n))),c[6]?i?i.p(c,w):(i=yt(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ge,o:ge,d(c){r&&r.d(c),c&&ee(n),i&&i.d(c),c&&ee(t)}}}function vn(e,n,t){let s,o,r,i,c,w,l,f,u,E,g,S,y,X,b,N,k,q,A,P,T,I,Y,W,L,z;O(e,Oe,h=>t(34,b=h)),O(e,ke,h=>t(35,N=h)),O(e,nt,h=>t(36,k=h)),O(e,Xt,h=>t(24,q=h)),O(e,We,h=>t(37,A=h)),O(e,Te,h=>t(14,P=h)),O(e,qe,h=>t(15,T=h)),O(e,tt,h=>t(25,Y=h)),O(e,At,h=>t(26,W=h)),O(e,Ye,h=>t(27,L=h)),O(e,Yt,h=>t(16,z=h));let{type:m}=n,j,D,K=Tt({x:0,y:0},{stiffness:1,damping:1});O(e,K,h=>t(3,I=h));let V=!1,U=[0,0],F=[0,0],ce=!1,te=!1;function x(h){window.addEventListener("mousemove",G),window.addEventListener("mouseup",pe),ae(h.clientX,h.clientY)}function _e(h){if(A)return;h.preventDefault(),window.addEventListener("touchmove",we),window.addEventListener("touchcancel",me),window.addEventListener("touchend",me);const H=h.touches[0];ae(H.clientX,H.clientY)}function ae(h,ne){t(4,K.stiffness=t(4,K.damping=1,K),K),j=h,t(19,D=ne),K.set({x:j-o/2-T,y:D-o/2-P}),t(6,ce=!0),te=!1,F=t(20,U=[u,E])}function G(h){Ne(h.clientX,h.clientY)}function we(h){if(A)return;h.preventDefault();const H=h.changedTouches[0];Ne(H.clientX,H.clientY)}function Ne(h,ne){const H=h-j,Se=ne-D;j=h,t(19,D=ne),K.update(_=>({x:_.x+H,y:_.y+Se}));const ze=[u,E];if(!(ze in b)){t(5,V=!1),t(20,U=ze);let _=[u-1,E];if(_ in b){const Z=b[_];if(q[Z].r!=s.l){t(5,V=!0);return}}if(_=[u+1,E],_ in b){const Z=b[_];if(q[Z].l!=s.r){t(5,V=!0);return}}if(_=[u,E-1],_ in b){const Z=b[_];if(q[Z].d!=s.u){t(5,V=!0);return}}if(_=[u,E+1],_ in b){const Z=b[_];if(q[Z].u!=s.d){t(5,V=!0);return}}F=U,te=!0}}function pe(h){window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",pe),Le()}function me(h){h.preventDefault(),window.removeEventListener("touchmove",we),window.removeEventListener("touchcancel",me),window.removeEventListener("touchend",me),Le()}function Le(){if(t(6,ce=!1),f||!te)return;const h=F[0],ne=F[1],H=k;oe(nt,k++,k),N.push({id:H,type:m,gx:h,gy:ne}),ke.set(N),oe(Oe,b[[h,ne]]=m,b)}return e.$$set=h=>{"type"in h&&t(0,m=h.type)},e.$$.update=()=>{e.$$.dirty[0]&16777217&&t(8,s=q[m]),e.$$.dirty[0]&134217728&&t(1,o=Me*L),e.$$.dirty[0]&2&&t(13,r=o*68/60),e.$$.dirty[0]&2&&t(2,i=o*75.16/60),e.$$.dirty[0]&6&&t(12,c=o-i),e.$$.dirty[0]&67108865&&t(11,w=W[m]),e.$$.dirty[0]&33554432&&t(23,l=Y),e.$$.dirty[0]&8912896&&t(7,f=D>l),e.$$.dirty[0]&10&&(u=Math.round(I.x/o)),e.$$.dirty[0]&10&&(E=Math.round(I.y/o)),e.$$.dirty[0]&1048578&&t(22,g=U[0]*o),e.$$.dirty[0]&1048578&&t(21,S=U[1]*o),e.$$.dirty[0]&4194312&&t(10,y=g-I.x),e.$$.dirty[0]&2097160&&t(9,X=S-I.y)},[m,o,i,I,K,V,ce,f,s,X,y,w,c,r,P,T,z,x,_e,D,U,S,g,l,q,Y,W,L]}class ye extends He{constructor(n){super(),Ge(this,n,vn,yn,Ce,{type:0},null,[-1,-1])}}function En(e){let n,t,s,o,r,i,c,w,l,f,u,E,g,S,y,X,b,N,k,q,A,P,T,I,Y,W,L,z,m,j,D,K,V,U,F,ce,te,x,_e,ae,G,we,Ne,pe,me,Le,h,ne,H,Se,ze;return s=new ye({props:{type:"0"}}),r=new ye({props:{type:"1"}}),c=new ye({props:{type:"2"}}),l=new ye({props:{type:"3"}}),u=new ye({props:{type:"4"}}),g=new ye({props:{type:"5"}}),y=new ye({props:{type:"6"}}),b=new ye({props:{type:"7"}}),k=new ye({props:{type:"8"}}),A=new ye({props:{type:"9"}}),T=new ye({props:{type:"10"}}),{c(){n=v("div"),t=v("div"),de(s.$$.fragment),o=C(),de(r.$$.fragment),i=C(),de(c.$$.fragment),w=C(),de(l.$$.fragment),f=C(),de(u.$$.fragment),E=C(),de(g.$$.fragment),S=C(),de(y.$$.fragment),X=C(),de(b.$$.fragment),N=C(),de(k.$$.fragment),q=C(),de(A.$$.fragment),P=C(),de(T.$$.fragment),I=C(),Y=v("div"),W=v("button"),W.textContent="Reset",L=C(),z=v("div"),m=v("div"),j=R("Maximal square: "),D=R(e[1]),K=R("x"),V=R(e[1]),U=C(),F=v("div"),ce=R("Best: "),te=R(e[2]),x=R("x"),_e=R(e[2]),ae=C(),G=v("div"),we=v("div"),we.textContent="CLEAR EVERYTHING?",Ne=C(),pe=v("div"),me=v("button"),me.textContent="Reset",Le=C(),h=v("button"),h.textContent="Cancel",M(W,"id","settings"),M(W,"class","button svelte-96j2t6"),M(Y,"class","tool svelte-96j2t6"),M(t,"class","toolcontainer nodrag svelte-96j2t6"),M(t,"draggable","false"),M(m,"class","score svelte-96j2t6"),M(F,"class","score svelte-96j2t6"),M(z,"class","hiscore svelte-96j2t6"),M(n,"class","toolbar svelte-96j2t6"),M(n,"draggable","false"),M(we,"class","text svelte-96j2t6"),M(me,"class","button svelte-96j2t6"),M(h,"class","button svelte-96j2t6"),M(pe,"class","buttons svelte-96j2t6"),M(G,"class",ne="resetdialog"+(e[0]?" show":"")+" svelte-96j2t6")},m(_,Z){re(_,n,Z),d(n,t),ie(s,t,null),d(t,o),ie(r,t,null),d(t,i),ie(c,t,null),d(t,w),ie(l,t,null),d(t,f),ie(u,t,null),d(t,E),ie(g,t,null),d(t,S),ie(y,t,null),d(t,X),ie(b,t,null),d(t,N),ie(k,t,null),d(t,q),ie(A,t,null),d(t,P),ie(T,t,null),d(t,I),d(t,Y),d(Y,W),d(n,L),d(n,z),d(z,m),d(m,j),d(m,D),d(m,K),d(m,V),d(z,U),d(z,F),d(F,ce),d(F,te),d(F,x),d(F,_e),re(_,ae,Z),re(_,G,Z),d(G,we),d(G,Ne),d(G,pe),d(pe,me),d(pe,Le),d(pe,h),H=!0,Se||(ze=[fe(W,"click",e[3]),fe(me,"click",e[5]),fe(h,"click",e[4])],Se=!0)},p(_,[Z]){(!H||Z&2)&&ue(D,_[1]),(!H||Z&2)&&ue(V,_[1]),(!H||Z&4)&&ue(te,_[2]),(!H||Z&4)&&ue(_e,_[2]),(!H||Z&1&&ne!==(ne="resetdialog"+(_[0]?" show":"")+" svelte-96j2t6"))&&M(G,"class",ne)},i(_){H||($(s.$$.fragment,_),$(r.$$.fragment,_),$(c.$$.fragment,_),$(l.$$.fragment,_),$(u.$$.fragment,_),$(g.$$.fragment,_),$(y.$$.fragment,_),$(b.$$.fragment,_),$(k.$$.fragment,_),$(A.$$.fragment,_),$(T.$$.fragment,_),H=!0)},o(_){se(s.$$.fragment,_),se(r.$$.fragment,_),se(c.$$.fragment,_),se(l.$$.fragment,_),se(u.$$.fragment,_),se(g.$$.fragment,_),se(y.$$.fragment,_),se(b.$$.fragment,_),se(k.$$.fragment,_),se(A.$$.fragment,_),se(T.$$.fragment,_),H=!1},d(_){_&&ee(n),le(s),le(r),le(c),le(l),le(u),le(g),le(y),le(b),le(k),le(A),le(T),_&&ee(ae),_&&ee(G),Se=!1,ve(ze)}}}function kn(e,n,t){let s,o;O(e,Pe,f=>t(1,s=f)),O(e,ot,f=>t(2,o=f));let r=!1;function i(){t(0,r=!0),window.addEventListener("mouseup",w)}function c(){t(0,r=!1),window.removeEventListener("mouseup",w)}function w(f){c()}function l(){fn(),c()}return[r,s,o,i,c,l]}class Ln extends He{constructor(n){super(),Ge(this,n,kn,En,Ce,{})}}function vt(e,n,t){const s=e.slice();return s[28]=n[t],s}function Et(e){let n,t;return n=new _n({props:{pid:e[28].id,type:e[28].type,gridx:e[28].gx,gridy:e[28].gy}}),{c(){de(n.$$.fragment)},m(s,o){ie(n,s,o),t=!0},p(s,o){const r={};o&4&&(r.pid=s[28].id),o&4&&(r.type=s[28].type),o&4&&(r.gridx=s[28].gx),o&4&&(r.gridy=s[28].gy),n.$set(r)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){se(n.$$.fragment,s),t=!1},d(s){le(n,s)}}}function Sn(e){let n,t,s,o,r,i,c,w,l,f=e[2],u=[];for(let g=0;g<f.length;g+=1)u[g]=Et(vt(e,f,g));const E=g=>se(u[g],1,1,()=>{u[g]=null});return i=new Ln({}),{c(){n=v("div"),t=v("div"),o=C();for(let g=0;g<u.length;g+=1)u[g].c();r=C(),de(i.$$.fragment),M(t,"class","background nodrag svelte-1wvpcpf"),p(t,"cursor",e[0]?"move":"auto"),$e(()=>e[6].call(t)),M(n,"class","canvas svelte-1wvpcpf"),M(n,"draggable","false")},m(g,S){re(g,n,S),d(n,t),s=Bt(t,e[6].bind(t)),d(n,o);for(let y=0;y<u.length;y+=1)u[y].m(n,null);d(n,r),ie(i,n,null),c=!0,w||(l=[fe(t,"mousedown",e[3]),fe(t,"touchstart",e[4])],w=!0)},p(g,[S]){if((!c||S&1)&&p(t,"cursor",g[0]?"move":"auto"),S&4){f=g[2];let y;for(y=0;y<f.length;y+=1){const X=vt(g,f,y);u[y]?(u[y].p(X,S),$(u[y],1)):(u[y]=Et(X),u[y].c(),$(u[y],1),u[y].m(n,r))}for(Ft(),y=f.length;y<u.length;y+=1)E(y);Qt()}},i(g){if(!c){for(let S=0;S<f.length;S+=1)$(u[S]);$(i.$$.fragment,g),c=!0}},o(g){u=u.filter(Boolean);for(let S=0;S<u.length;S+=1)se(u[S]);se(i.$$.fragment,g),c=!1},d(g){g&&ee(n),s(),Ct(u,g),le(i),w=!1,ve(l)}}}function kt(e,n){const t=e.clientX-n.clientX,s=e.clientY-n.clientY;return Math.sqrt(t*t+s*s)}function zn(e,n,t){let s,o,r,i,c,w;O(e,We,m=>t(14,s=m)),O(e,Te,m=>t(15,o=m)),O(e,qe,m=>t(16,r=m)),O(e,Ye,m=>t(5,i=m)),O(e,tt,m=>t(1,c=m)),O(e,ke,m=>t(2,w=m));let l,f,u=!1,E,g,S,y;function X(m){l=m.clientX,f=m.clientY,t(0,u=!0),window.addEventListener("mousemove",k),window.addEventListener("mouseup",I)}function b(m){if(m.preventDefault(),m.touches.length<2)return;oe(We,s=!0,s),t(0,u=!1),E=i;const j=m.touches[0],D=m.touches[1];S=(j.clientX+D.clientX)/2,y=(j.clientY+D.clientY)/2,g=kt(j,D),window.addEventListener("touchmove",P),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function N(m){if(m.touches.length>1)return;m.preventDefault();const j=m.touches[0];l=j.clientX,f=j.clientY,t(0,u=!0),window.addEventListener("touchmove",P),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function k(m){const j=m.clientX-l,D=m.clientY-f;l=m.clientX,f=m.clientY,T(j,D)}function q(m){const j=(S-r)/(Me*i),D=(y-o)/(Me*i);oe(qe,r=S-j*(Me*E*m),r),oe(Te,o=y-D*(Me*E*m),o),oe(Ye,i=E*m,i)}function A(m){S=m.clientX,y=m.clientY;let j=-.001*m.deltaY;E=i,j>.1&&(j=.1),j<-.1&&(j=-.1),q(1+j)}function P(m){if(m.preventDefault(),s){if(m.touches.length<2)return;const V=m.touches[0],U=m.touches[1],F=kt(V,U);q(F/g);return}const j=m.touches[0],D=j.clientX-l,K=j.clientY-f;l=j.clientX,f=j.clientY,T(D,K)}function T(m,j){oe(qe,r+=m,r),oe(Te,o+=j,o)}function I(m){t(0,u=!1),window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",I)}function Y(m){m.preventDefault(),oe(We,s=!1,s),t(0,u=!1),window.removeEventListener("touchmove",P),window.removeEventListener("touchcancel",Y),window.removeEventListener("touchend",Y)}function W(){window.addEventListener("touchstart",b),window.addEventListener("wheel",A)}function L(){window.removeEventListener("touchstart",b),window.removeEventListener("wheel",A)}Ot(W),Gt(L);function z(){c=this.clientHeight,tt.set(c)}return e.$$.update=()=>{e.$$.dirty&32},[u,c,w,X,N,i,z]}class Mn extends He{constructor(n){super(),Ge(this,n,zn,Sn,Ce,{})}}function Nn(e){let n,t,s;return t=new Mn({}),{c(){n=v("main"),de(t.$$.fragment)},m(o,r){re(o,n,r),ie(t,n,null),s=!0},p:ge,i(o){s||($(t.$$.fragment,o),s=!0)},o(o){se(t.$$.fragment,o),s=!1},d(o){o&&ee(n),le(t)}}}class jn extends He{constructor(n){super(),Ge(this,n,null,Nn,Ce,{})}}new jn({target:document.getElementById("app")});
