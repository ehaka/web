(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();function ge(){}function St(e){return e()}function mt(){return Object.create(null)}function ke(e){e.forEach(St)}function zt(e){return typeof e=="function"}function Ce(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let Qe;function gt(e,n){return Qe||(Qe=document.createElement("a")),Qe.href=n,e===Qe.href}function Pt(e){return Object.keys(e).length===0}function xt(e,...n){if(e==null)return ge;const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function j(e,n,t){e.$$.on_destroy.push(xt(n,t))}function ne(e,n,t){return e.set(t),n}const Mt=typeof window<"u";let ht=Mt?()=>window.performance.now():()=>Date.now(),Nt=Mt?e=>requestAnimationFrame(e):ge;const xe=new Set;function Ot(e){xe.forEach(n=>{n.c(e)||(xe.delete(n),n.f())}),xe.size!==0&&Nt(Ot)}function Ct(e){let n;return xe.size===0&&Nt(Ot),{promise:new Promise(t=>{xe.add(n={c:e,f:t})}),abort(){xe.delete(n)}}}function d(e,n){e.appendChild(n)}function se(e,n,t){e.insertBefore(n,t||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function It(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function y(e){return document.createElement(e)}function Z(e){return document.createTextNode(e)}function x(){return Z(" ")}function ct(){return Z("")}function fe(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function N(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function Wt(e){return Array.from(e.childNodes)}function ue(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}function p(e,n,t,r){t===null?e.style.removeProperty(n):e.style.setProperty(n,t,r?"important":"")}let Ke;function Bt(){if(Ke===void 0){Ke=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ke=!0}}return Ke}function Gt(e,n){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=y("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const o=Bt();let s;return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=fe(window,"message",i=>{i.source===r.contentWindow&&n()})):(r.src="about:blank",r.onload=()=>{s=fe(r.contentWindow,"resize",n)}),d(e,r),()=>{(o||s&&r.contentWindow)&&s(),ee(r)}}let Ge;function Ie(e){Ge=e}function qt(){if(!Ge)throw new Error("Function called outside component initialization");return Ge}function jt(e){qt().$$.on_mount.push(e)}function Ht(e){qt().$$.on_destroy.push(e)}const De=[],bt=[],Ve=[],_t=[],Zt=Promise.resolve();let ut=!1;function Rt(){ut||(ut=!0,Zt.then(Tt))}function $e(e){Ve.push(e)}const lt=new Set;let Je=0;function Tt(){if(Je!==0)return;const e=Ge;do{try{for(;Je<De.length;){const n=De[Je];Je++,Ie(n),Ft(n.$$)}}catch(n){throw De.length=0,Je=0,n}for(Ie(null),De.length=0,Je=0;bt.length;)bt.pop()();for(let n=0;n<Ve.length;n+=1){const t=Ve[n];lt.has(t)||(lt.add(t),t())}Ve.length=0}while(De.length);for(;_t.length;)_t.pop()();ut=!1,lt.clear(),Ie(e)}function Ft(e){if(e.fragment!==null){e.update(),ke(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach($e)}}const Ue=new Set;let qe;function Qt(){qe={r:0,c:[],p:qe}}function Kt(){qe.r||ke(qe.c),qe=qe.p}function $(e,n){e&&e.i&&(Ue.delete(e),e.i(n))}function re(e,n,t,r){if(e&&e.o){if(Ue.has(e))return;Ue.add(e),qe.c.push(()=>{Ue.delete(e),r&&(t&&e.d(1),r())}),e.o(n)}else r&&r()}function de(e){e&&e.c()}function ie(e,n,t,r){const{fragment:o,after_update:s}=e.$$;o&&o.m(n,t),r||$e(()=>{const i=e.$$.on_mount.map(St).filter(zt);e.$$.on_destroy?e.$$.on_destroy.push(...i):ke(i),e.$$.on_mount=[]}),s.forEach($e)}function le(e,n){const t=e.$$;t.fragment!==null&&(ke(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Vt(e,n){e.$$.dirty[0]===-1&&(De.push(e),Rt(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function He(e,n,t,r,o,s,i,c=[-1]){const _=Ge;Ie(e);const l=e.$$={fragment:null,ctx:[],props:s,update:ge,not_equal:o,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(_?_.$$.context:[])),callbacks:mt(),dirty:c,skip_bound:!1,root:n.target||_.$$.root};i&&i(l.root);let f=!1;if(l.ctx=t?t(e,n.props||{},(u,v,...g)=>{const S=g.length?g[0]:v;return l.ctx&&o(l.ctx[u],l.ctx[u]=S)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](S),f&&Vt(e,u)),v}):[],l.update(),f=!0,ke(l.before_update),l.fragment=r?r(l.ctx):!1,n.target){if(n.hydrate){const u=Wt(n.target);l.fragment&&l.fragment.l(u),u.forEach(ee)}else l.fragment&&l.fragment.c();n.intro&&$(e.$$.fragment),ie(e,n.target,n.anchor,n.customElement),Tt()}Ie(_)}class Ze{$destroy(){le(this,1),this.$destroy=ge}$on(n,t){if(!zt(t))return ge;const r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(t),()=>{const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}$set(n){this.$$set&&!Pt(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Ae=[];function rt(e,n){return{subscribe:he(e,n).subscribe}}function he(e,n=ge){let t;const r=new Set;function o(c){if(Ce(e,c)&&(e=c,t)){const _=!Ae.length;for(const l of r)l[1](),Ae.push(l,e);if(_){for(let l=0;l<Ae.length;l+=2)Ae[l][0](Ae[l+1]);Ae.length=0}}}function s(c){o(c(e))}function i(c,_=ge){const l=[c,_];return r.add(l),r.size===1&&(t=n(o)||ge),c(e),()=>{r.delete(l),r.size===0&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function wt(e){return Object.prototype.toString.call(e)==="[object Date]"}function ft(e,n,t,r){if(typeof t=="number"||wt(t)){const o=r-t,s=(t-n)/(e.dt||1/60),i=e.opts.stiffness*o,c=e.opts.damping*s,_=(i-c)*e.inv_mass,l=(s+_)*e.dt;return Math.abs(l)<e.opts.precision&&Math.abs(o)<e.opts.precision?r:(e.settled=!1,wt(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((o,s)=>ft(e,n[s],t[s],r[s]));if(typeof t=="object"){const o={};for(const s in t)o[s]=ft(e,n[s],t[s],r[s]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function Yt(e,n={}){const t=he(e),{stiffness:r=.15,damping:o=.8,precision:s=.01}=n;let i,c,_,l=e,f=e,u=1,v=0,g=!1;function S(X,k={}){f=X;const z=_={};return e==null||k.hard||w.stiffness>=1&&w.damping>=1?(g=!0,i=ht(),l=X,t.set(e=f),Promise.resolve()):(k.soft&&(v=1/((k.soft===!0?.5:+k.soft)*60),u=0),c||(i=ht(),g=!1,c=Ct(E=>{if(g)return g=!1,c=null,!1;u=Math.min(u+v,1);const O={inv_mass:u,opts:w,settled:!0,dt:(E-i)*60/1e3},J=ft(O,l,e,f);return i=E,l=e,t.set(e=J),O.settled&&(c=null),!O.settled})),new Promise(E=>{c.promise.then(()=>{z===_&&E()})}))}const w={set:S,update:(X,k)=>S(X(f,e),k),subscribe:t.subscribe,stiffness:r,damping:o,precision:s};return w}const Ut="assets/tile00-5d5331e2.svg",$t="assets/tile01-e7b4c986.svg",en="assets/tile02-5ef45a2a.svg",tn="assets/tile03-7261b5d7.svg",nn="assets/tile04-d0d49acb.svg",on="assets/tile05-06e93071.svg",rn="assets/tile06-bed8cf84.svg",sn="assets/tile07-d3ed7d20.svg",ln="assets/tile08-03055187.svg",un="assets/tile09-08030fc9.svg",fn="assets/tile10-053d74e0.svg",Ne=64,et=32,Xe=he(JSON.parse(localStorage.getItem("zoomfactor"))||1);Xe.subscribe(e=>localStorage.zoomfactor=JSON.stringify(e));const tt=he(0),We=he(!1),nt=he(JSON.parse(localStorage.getItem("nextid"))||0);nt.subscribe(e=>localStorage.nextid=JSON.stringify(e));const je=he(JSON.parse(localStorage.getItem("grid"))||{});je.subscribe(e=>localStorage.grid=JSON.stringify(e));const Le=he(JSON.parse(localStorage.getItem("pieces"))||[]);Le.subscribe(e=>localStorage.pieces=JSON.stringify(e));const ot=he(JSON.parse(localStorage.getItem("bestsquare"))||0);ot.subscribe(e=>localStorage.bestsquare=JSON.stringify(e));const Pe=he(0),Be=he(JSON.parse(localStorage.getItem("msqgrid"))||{});Be.subscribe(e=>localStorage.msqgrid=JSON.stringify(e));const Te=he(JSON.parse(localStorage.getItem("camerax"))||0),Ye=he(JSON.parse(localStorage.getItem("cameray"))||0);Te.subscribe(e=>localStorage.camerax=JSON.stringify(e));Ye.subscribe(e=>localStorage.cameray=JSON.stringify(e));const Xt=rt("jigsaw"),Jt=rt([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:0,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:0,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);rt([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:4,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:4,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);const At=rt([Ut,$t,en,tn,nn,on,rn,sn,ln,un,fn]);function cn(){Te.set(0),Ye.set(0),Xe.set(1),je.set({}),Le.set([]),nt.set(0),Be.set({}),Pe.set(0)}function dn(e){let n,t=(e[2]<et?"":e[0])+"",r,o,s,i,c,_,l=e[1]&&yt(e);return{c(){n=y("div"),r=Z(t),s=x(),l&&l.c(),i=ct(),N(n,"class","piece svelte-rswga4"),N(n,"style",o="width: "+e[13]+"px; height: "+e[3]+"px; background-image: url("+e[11]+"); background-repeat: no-repeat; left: "+0+"px; top: "+e[12]+"px; transform: translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px); line-height: "+e[3]+"px; "+(e[1]?"z-index: 20; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(e[7]?"hidden":"visible"))},m(f,u){se(f,n,u),d(n,r),se(f,s,u),l&&l.m(f,u),se(f,i,u),c||(_=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(f,u){u[0]&5&&t!==(t=(f[2]<et?"":f[0])+"")&&ue(r,t),u[0]&112794&&o!==(o="width: "+f[13]+"px; height: "+f[3]+"px; background-image: url("+f[11]+"); background-repeat: no-repeat; left: "+0+"px; top: "+f[12]+"px; transform: translate("+(f[4].x+f[15])+"px,"+(f[4].y+f[16])+"px); line-height: "+f[3]+"px; "+(f[1]?"z-index: 20; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(f[7]?"hidden":"visible"))&&N(n,"style",o),f[1]?l?l.p(f,u):(l=yt(f),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(f){f&&ee(n),f&&ee(s),l&&l.d(f),f&&ee(i),c=!1,ke(_)}}}function an(e){let n,t,r,o,s,i=e[8].u+"",c,_,l,f,u,v=e[8].l+"",g,S,w,X=e[8].r+"",k,z,E,O,J,D=e[8].d+"",T,C,Y,I;return{c(){n=y("div"),t=y("table"),r=y("tr"),o=y("td"),s=y("td"),c=Z(i),_=y("td"),l=x(),f=y("tr"),u=y("td"),g=Z(v),S=y("td"),w=y("td"),k=Z(X),z=x(),E=y("tr"),O=y("td"),J=y("td"),T=Z(D),C=y("td"),N(t,"class","table svelte-rswga4"),N(n,"class","piece box svelte-rswga4"),p(n,"width",e[2]+"px"),p(n,"height",e[2]+"px"),p(n,"left",0+"px"),p(n,"top",0+"px"),p(n,"line-height",e[2]/4+"px"),p(n,"cursor",e[1]?"move":"auto"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)")},m(L,M){se(L,n,M),d(n,t),d(t,r),d(r,o),d(r,s),d(s,c),d(r,_),d(t,l),d(t,f),d(f,u),d(u,g),d(f,S),d(f,w),d(w,k),d(t,z),d(t,E),d(E,O),d(E,J),d(J,T),d(E,C),Y||(I=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],Y=!0)},p(L,M){M[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),M[0]&256&&v!==(v=L[8].l+"")&&ue(g,v),M[0]&256&&X!==(X=L[8].r+"")&&ue(k,X),M[0]&256&&D!==(D=L[8].d+"")&&ue(T,D),M[0]&4&&p(n,"width",L[2]+"px"),M[0]&4&&p(n,"height",L[2]+"px"),M[0]&4&&p(n,"line-height",L[2]/4+"px"),M[0]&2&&p(n,"cursor",L[1]?"move":"auto"),M[0]&98320&&p(n,"transform","translate("+(L[4].x+L[15])+"px,"+(L[4].y+L[16])+"px)")},d(L){L&&ee(n),Y=!1,ke(I)}}}function yt(e){let n;return{c(){n=y("div"),N(n,"class","piece svelte-rswga4"),p(n,"width",e[13]+"px"),p(n,"height",e[3]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"background-repeat","no-repeat"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","2"),p(n,"line-height",e[3]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(t,r){se(t,n,r)},p(t,r){r[0]&8192&&p(n,"width",t[13]+"px"),r[0]&8&&p(n,"height",t[3]+"px"),r[0]&2048&&p(n,"background-image","url("+t[11]+")"),r[0]&4096&&p(n,"top",t[12]+"px"),r[0]&8&&p(n,"line-height",t[3]+"px"),r[0]&1600&&p(n,"filter","drop-shadow("+t[10]+"px "+t[9]+"px 1px "+(t[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),r[0]&98320&&p(n,"transform","translate("+(t[4].x+t[15])+"px,"+(t[4].y+t[16])+"px)"),r[0]&128&&p(n,"visibility",t[7]?"hidden":"visible")},d(t){t&&ee(n)}}}function pn(e){let n;function t(s,i){if(s[14]=="labels")return an;if(s[14]=="jigsaw")return dn}let r=t(e),o=r&&r(e);return{c(){o&&o.c(),n=ct()},m(s,i){o&&o.m(s,i),se(s,n,i)},p(s,i){r===(r=t(s))&&o?o.p(s,i):(o&&o.d(1),o=r&&r(s),o&&(o.c(),o.m(n.parentNode,n)))},i:ge,o:ge,d(s){o&&o.d(s),s&&ee(n)}}}const mn=0,gn=1,hn=2;function bn(e,n,t){let r,o,s,i,c,_,l,f,u,v,g,S,w,X,k,z,E,O,J,D,T,C,Y,I,L,M,m,q;j(e,Le,a=>t(37,k=a)),j(e,je,a=>t(38,z=a)),j(e,Be,a=>t(39,E=a)),j(e,Jt,a=>t(27,O=a)),j(e,We,a=>t(40,J=a)),j(e,Xe,a=>t(28,D=a)),j(e,Pe,a=>t(41,T=a)),j(e,ot,a=>t(42,C=a)),j(e,tt,a=>t(29,I=a)),j(e,At,a=>t(30,L=a)),j(e,Xt,a=>t(14,M=a)),j(e,Te,a=>t(15,m=a)),j(e,Ye,a=>t(16,q=a));let{pid:A}=n,{gridx:Q}=n,{gridy:V}=n,{type:K}=n,R,ce,te=A,P=Yt({x:Q*o,y:V*o},{stiffness:1,damping:1});j(e,P,a=>t(4,Y=a));let be=!1,ae=[Q,V],B=[Q,V],_e=!1;jt(Oe);function Oe(){me(),ne(je,z[[u,v]]=K,z),pe(u,v,0)}function pe(a,W,ye){let we=W,ve=0,U=ye;for(;we==W||[a,we]in z;){let F=a;for(we==W&&!([a,W]in z)&&(F=a-1);[F,we]in z;){let st=E[[F,we+1]]||0,Fe=E[[F+1,we+1]]||0,Dt=E[[F+1,we]]||0,it=1+Math.min(st,Fe,Dt),pt=E[[F,we]];pt>U&&(U=pt),ne(Be,E[[F,we]]=it,E),it>ve&&(ve=it),F--}we--}if(U>ve){let F=0;for(let st in E){let Fe=E[st];Fe>F&&(F=Fe)}return ne(Pe,T=F,T),mn}if(ve>C)return ne(ot,C=ve,C),ne(Pe,T=ve,T),hn;if(ve>T)return ne(Pe,T=ve,T),gn}Xe.subscribe(me);function me(a){const W=H();W!==void 0&&(t(5,P.stiffness=t(5,P.damping=1,P),P),P.set({x:W.gx*Ne*D,y:W.gy*Ne*D}))}function Se(a,W,ye){ye?(t(5,P.stiffness=.3,P),t(5,P.damping=.7,P)):t(5,P.stiffness=t(5,P.damping=1,P),P),P.set({x:a*o,y:W*o}),R=a*o,t(22,ce=W*o)}function h(a){R=a.clientX,t(22,ce=a.clientY),window.addEventListener("mousemove",ze),window.addEventListener("mouseup",dt),oe()}function oe(){t(5,P.stiffness=t(5,P.damping=1,P),P),t(1,_e=!0),delete z[[u,v]];let a=E[[u,v]];delete E[[u,v]],pe(u,v,a),B=t(23,ae=[u,v])}function G(a){const W=a.touches;if(J)return;a.preventDefault();const ye=W[0];R=ye.clientX,t(22,ce=ye.clientY),window.addEventListener("touchmove",Me),window.addEventListener("touchcancel",Re),window.addEventListener("touchend",Re),oe()}function ze(a){b(a.clientX,a.clientY)}function Me(a){if(J)return;a.preventDefault();const ye=a.changedTouches[0];b(ye.clientX,ye.clientY)}function b(a,W){const ye=a-R,we=W-ce;R=a,t(22,ce=W),P.update(U=>({x:U.x+ye,y:U.y+we}));const ve=[u,v];if(!(ve in z)){t(6,be=!1),t(23,ae=ve);let U=[u-1,v];if(U in z){const F=z[U];if(O[F].r!=r.l){t(6,be=!0);return}}if(U=[u+1,v],U in z){const F=z[U];if(O[F].l!=r.r){t(6,be=!0);return}}if(U=[u,v-1],U in z){const F=z[U];if(O[F].d!=r.u){t(6,be=!0);return}}if(U=[u,v+1],U in z){const F=z[U];if(O[F].u!=r.d){t(6,be=!0);return}}B=ae}}function H(){te>=k.length&&(te=k.length-1);let a=k[te];for(;te>=0&&a.id!=A;)te--,a=k[te];if(te>=0)return a}function dt(a){window.removeEventListener("mousemove",ze),window.removeEventListener("mouseup",dt),at()}function Re(a){a.preventDefault(),window.removeEventListener("touchmove",Me),window.removeEventListener("touchcancel",Re),window.removeEventListener("touchend",Re),at()}function at(){if(t(1,_e=!1),f){H();const a=k.length-1;let W=k[a];ne(Le,k[te]=W,k),Se(W.gx,W.gy,!1),t(19,A=W.id),k.pop(),Le.set(k),je.set(z),Be.set(E);return}Se(B[0],B[1],!0),ne(je,z[B]=K,z),pe(B[0],B[1],0),H(),ne(Le,k[te]={id:A,type:K,gx:B[0],gy:B[1]},k)}return e.$$set=a=>{"pid"in a&&t(19,A=a.pid),"gridx"in a&&t(20,Q=a.gridx),"gridy"in a&&t(21,V=a.gridy),"type"in a&&t(0,K=a.type)},e.$$.update=()=>{e.$$.dirty[0]&134217729&&t(8,r=O[K]),e.$$.dirty[0]&268435456&&t(2,o=Ne*D),e.$$.dirty[0]&4&&t(13,s=o*68/60),e.$$.dirty[0]&4&&t(3,i=o*75.16/60),e.$$.dirty[0]&12&&t(12,c=o-i),e.$$.dirty[0]&1073741825&&t(11,_=L[K]),e.$$.dirty[0]&536870912&&t(26,l=I),e.$$.dirty[0]&71303170&&t(7,f=_e&&ce>l),e.$$.dirty[0]&20&&(u=Math.round(Y.x/o)),e.$$.dirty[0]&20&&(v=Math.round(Y.y/o)),e.$$.dirty[0]&8388612&&t(25,g=ae[0]*o),e.$$.dirty[0]&8388612&&t(24,S=ae[1]*o),e.$$.dirty[0]&33554448&&t(10,w=g-Y.x),e.$$.dirty[0]&16777232&&t(9,X=S-Y.y)},[K,_e,o,i,Y,P,be,f,r,X,w,_,c,s,M,m,q,h,G,A,Q,V,ce,ae,S,g,l,O,D,I,L]}class _n extends Ze{constructor(n){super(),He(this,n,bn,pn,Ce,{pid:19,gridx:20,gridy:21,type:0},null,[-1,-1])}}function wn(e){let n,t,r,o,s,i,c,_;return{c(){n=y("div"),t=y("img"),o=x(),s=y("div"),i=Z(e[0]),N(t,"class","image nodrag svelte-1a15y55"),N(t,"draggable","false"),gt(t.src,r=e[11])||N(t,"src",r),N(s,"class","imagelabel svelte-1a15y55"),N(n,"class","piece nodrag static svelte-1a15y55"),N(n,"draggable","false"),p(n,"z-index","4"),p(n,"cursor","auto")},m(l,f){se(l,n,f),d(n,t),d(n,o),d(n,s),d(s,i),c||(_=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(l,f){f[0]&2048&&!gt(t.src,r=l[11])&&N(t,"src",r),f[0]&1&&ue(i,l[0])},d(l){l&&ee(n),c=!1,ke(_)}}}function yn(e){let n,t,r,o,s,i=e[8].u+"",c,_,l,f,u,v=e[8].l+"",g,S,w,X=e[8].r+"",k,z,E,O,J,D=e[8].d+"",T,C,Y,I;return{c(){n=y("div"),t=y("table"),r=y("tr"),o=y("td"),s=y("td"),c=Z(i),_=y("td"),l=x(),f=y("tr"),u=y("td"),g=Z(v),S=y("td"),w=y("td"),k=Z(X),z=x(),E=y("tr"),O=y("td"),J=y("td"),T=Z(D),C=y("td"),N(t,"class","table svelte-1a15y55"),N(n,"class","piece box static svelte-1a15y55"),p(n,"width",e[1]+"px"),p(n,"height",e[1]+"px"),p(n,"line-height",e[1]/4+"px"),p(n,"cursor",e[6]?"move":"auto"),p(n,"z-index","4")},m(L,M){se(L,n,M),d(n,t),d(t,r),d(r,o),d(r,s),d(s,c),d(r,_),d(t,l),d(t,f),d(f,u),d(u,g),d(f,S),d(f,w),d(w,k),d(t,z),d(t,E),d(E,O),d(E,J),d(J,T),d(E,C),Y||(I=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[17])],Y=!0)},p(L,M){M[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),M[0]&256&&v!==(v=L[8].l+"")&&ue(g,v),M[0]&256&&X!==(X=L[8].r+"")&&ue(k,X),M[0]&256&&D!==(D=L[8].d+"")&&ue(T,D),M[0]&2&&p(n,"width",L[1]+"px"),M[0]&2&&p(n,"height",L[1]+"px"),M[0]&2&&p(n,"line-height",L[1]/4+"px"),M[0]&64&&p(n,"cursor",L[6]?"move":"auto")},d(L){L&&ee(n),Y=!1,ke(I)}}}function vt(e){let n,t=(e[1]<et?"":e[0])+"",r;return{c(){n=y("div"),r=Z(t),N(n,"class","piece svelte-1a15y55"),p(n,"width",e[13]+"px"),p(n,"height",e[2]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"background-size",e[13]+"px "+e[2]+"px"),p(n,"background-repeat","no-repeat"),p(n,"position","absolute"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","5"),p(n,"line-height",e[2]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[3].x+e[15])+"px,"+(e[3].y+e[14])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(o,s){se(o,n,s),d(n,r)},p(o,s){s[0]&3&&t!==(t=(o[1]<et?"":o[0])+"")&&ue(r,t),s[0]&8192&&p(n,"width",o[13]+"px"),s[0]&4&&p(n,"height",o[2]+"px"),s[0]&2048&&p(n,"background-image","url("+o[11]+")"),s[0]&8196&&p(n,"background-size",o[13]+"px "+o[2]+"px"),s[0]&4096&&p(n,"top",o[12]+"px"),s[0]&4&&p(n,"line-height",o[2]+"px"),s[0]&1568&&p(n,"filter","drop-shadow("+o[10]+"px "+o[9]+"px 1px "+(o[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),s[0]&49160&&p(n,"transform","translate("+(o[3].x+o[15])+"px,"+(o[3].y+o[14])+"px)"),s[0]&128&&p(n,"visibility",o[7]?"hidden":"visible")},d(o){o&&ee(n)}}}function vn(e){let n,t;function r(c,_){if(c[16]=="labels")return yn;if(c[16]=="jigsaw")return wn}let o=r(e),s=o&&o(e),i=e[6]&&vt(e);return{c(){s&&s.c(),n=x(),i&&i.c(),t=ct()},m(c,_){s&&s.m(c,_),se(c,n,_),i&&i.m(c,_),se(c,t,_)},p(c,_){o===(o=r(c))&&s?s.p(c,_):(s&&s.d(1),s=o&&o(c),s&&(s.c(),s.m(n.parentNode,n))),c[6]?i?i.p(c,_):(i=vt(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ge,o:ge,d(c){s&&s.d(c),c&&ee(n),i&&i.d(c),c&&ee(t)}}}function En(e,n,t){let r,o,s,i,c,_,l,f,u,v,g,S,w,X,k,z,E,O,J,D,T,C,Y,I,L,M;j(e,Le,h=>t(34,k=h)),j(e,nt,h=>t(35,z=h)),j(e,Jt,h=>t(24,E=h)),j(e,je,h=>t(36,O=h)),j(e,We,h=>t(37,J=h)),j(e,Ye,h=>t(14,D=h)),j(e,Te,h=>t(15,T=h)),j(e,tt,h=>t(25,Y=h)),j(e,At,h=>t(26,I=h)),j(e,Xe,h=>t(27,L=h)),j(e,Xt,h=>t(16,M=h));let{type:m}=n,q,A,Q=Yt({x:0,y:0},{stiffness:1,damping:1});j(e,Q,h=>t(3,C=h));let V=!1,K=[0,0],R=[0,0],ce=!1,te=!1;function P(h){window.addEventListener("mousemove",B),window.addEventListener("mouseup",pe),ae(h.clientX,h.clientY)}function be(h){if(J)return;h.preventDefault(),window.addEventListener("touchmove",_e),window.addEventListener("touchcancel",me),window.addEventListener("touchend",me);const G=h.touches[0];ae(G.clientX,G.clientY)}function ae(h,oe){t(4,Q.stiffness=t(4,Q.damping=1,Q),Q),q=h,t(19,A=oe),Q.set({x:q-o/2-T,y:A-o/2-D}),t(6,ce=!0),te=!1,R=t(20,K=[u,v])}function B(h){Oe(h.clientX,h.clientY)}function _e(h){if(J)return;h.preventDefault();const G=h.changedTouches[0];Oe(G.clientX,G.clientY)}function Oe(h,oe){const G=h-q,ze=oe-A;q=h,t(19,A=oe),Q.update(b=>({x:b.x+G,y:b.y+ze}));const Me=[u,v];if(!(Me in O)){t(5,V=!1),t(20,K=Me);let b=[u-1,v];if(b in O){const H=O[b];if(E[H].r!=r.l){t(5,V=!0);return}}if(b=[u+1,v],b in O){const H=O[b];if(E[H].l!=r.r){t(5,V=!0);return}}if(b=[u,v-1],b in O){const H=O[b];if(E[H].d!=r.u){t(5,V=!0);return}}if(b=[u,v+1],b in O){const H=O[b];if(E[H].u!=r.d){t(5,V=!0);return}}R=K,te=!0}}function pe(h){window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",pe),Se()}function me(h){h.preventDefault(),window.removeEventListener("touchmove",_e),window.removeEventListener("touchcancel",me),window.removeEventListener("touchend",me),Se()}function Se(){if(t(6,ce=!1),f||!te)return;const h=R[0],oe=R[1],G=z;ne(nt,z++,z),k.push({id:G,type:m,gx:h,gy:oe}),Le.set(k)}return e.$$set=h=>{"type"in h&&t(0,m=h.type)},e.$$.update=()=>{e.$$.dirty[0]&16777217&&t(8,r=E[m]),e.$$.dirty[0]&134217728&&t(1,o=Ne*L),e.$$.dirty[0]&2&&t(13,s=o*68/60),e.$$.dirty[0]&2&&t(2,i=o*75.16/60),e.$$.dirty[0]&6&&t(12,c=o-i),e.$$.dirty[0]&67108865&&t(11,_=I[m]),e.$$.dirty[0]&33554432&&t(23,l=Y),e.$$.dirty[0]&8912896&&t(7,f=A>l),e.$$.dirty[0]&10&&(u=Math.round(C.x/o)),e.$$.dirty[0]&10&&(v=Math.round(C.y/o)),e.$$.dirty[0]&1048578&&t(22,g=K[0]*o),e.$$.dirty[0]&1048578&&t(21,S=K[1]*o),e.$$.dirty[0]&4194312&&t(10,w=g-C.x),e.$$.dirty[0]&2097160&&t(9,X=S-C.y)},[m,o,i,C,Q,V,ce,f,r,X,w,_,c,s,D,T,M,P,be,A,K,S,g,l,E,Y,I,L]}class Ee extends Ze{constructor(n){super(),He(this,n,En,vn,Ce,{type:0},null,[-1,-1])}}function kn(e){let n,t,r,o,s,i,c,_,l,f,u,v,g,S,w,X,k,z,E,O,J,D,T,C,Y,I,L,M,m,q,A,Q,V,K,R,ce,te,P,be,ae,B,_e,Oe,pe,me,Se,h,oe,G,ze,Me;return r=new Ee({props:{type:"0"}}),s=new Ee({props:{type:"1"}}),c=new Ee({props:{type:"2"}}),l=new Ee({props:{type:"3"}}),u=new Ee({props:{type:"4"}}),g=new Ee({props:{type:"5"}}),w=new Ee({props:{type:"6"}}),k=new Ee({props:{type:"7"}}),E=new Ee({props:{type:"8"}}),J=new Ee({props:{type:"9"}}),T=new Ee({props:{type:"10"}}),{c(){n=y("div"),t=y("div"),de(r.$$.fragment),o=x(),de(s.$$.fragment),i=x(),de(c.$$.fragment),_=x(),de(l.$$.fragment),f=x(),de(u.$$.fragment),v=x(),de(g.$$.fragment),S=x(),de(w.$$.fragment),X=x(),de(k.$$.fragment),z=x(),de(E.$$.fragment),O=x(),de(J.$$.fragment),D=x(),de(T.$$.fragment),C=x(),Y=y("div"),I=y("button"),I.textContent="Reset",L=x(),M=y("div"),m=y("div"),q=Z("Maximal square: "),A=Z(e[1]),Q=Z("x"),V=Z(e[1]),K=x(),R=y("div"),ce=Z("Best: "),te=Z(e[2]),P=Z("x"),be=Z(e[2]),ae=x(),B=y("div"),_e=y("div"),_e.textContent="CLEAR EVERYTHING?",Oe=x(),pe=y("div"),me=y("button"),me.textContent="Reset",Se=x(),h=y("button"),h.textContent="Cancel",N(I,"id","settings"),N(I,"class","button svelte-96j2t6"),N(Y,"class","tool svelte-96j2t6"),N(t,"class","toolcontainer nodrag svelte-96j2t6"),N(t,"draggable","false"),N(m,"class","score svelte-96j2t6"),N(R,"class","score svelte-96j2t6"),N(M,"class","hiscore svelte-96j2t6"),N(n,"class","toolbar svelte-96j2t6"),N(n,"draggable","false"),N(_e,"class","text svelte-96j2t6"),N(me,"class","button svelte-96j2t6"),N(h,"class","button svelte-96j2t6"),N(pe,"class","buttons svelte-96j2t6"),N(B,"class",oe="resetdialog"+(e[0]?" show":"")+" svelte-96j2t6")},m(b,H){se(b,n,H),d(n,t),ie(r,t,null),d(t,o),ie(s,t,null),d(t,i),ie(c,t,null),d(t,_),ie(l,t,null),d(t,f),ie(u,t,null),d(t,v),ie(g,t,null),d(t,S),ie(w,t,null),d(t,X),ie(k,t,null),d(t,z),ie(E,t,null),d(t,O),ie(J,t,null),d(t,D),ie(T,t,null),d(t,C),d(t,Y),d(Y,I),d(n,L),d(n,M),d(M,m),d(m,q),d(m,A),d(m,Q),d(m,V),d(M,K),d(M,R),d(R,ce),d(R,te),d(R,P),d(R,be),se(b,ae,H),se(b,B,H),d(B,_e),d(B,Oe),d(B,pe),d(pe,me),d(pe,Se),d(pe,h),G=!0,ze||(Me=[fe(I,"click",e[3]),fe(me,"click",e[5]),fe(h,"click",e[4])],ze=!0)},p(b,[H]){(!G||H&2)&&ue(A,b[1]),(!G||H&2)&&ue(V,b[1]),(!G||H&4)&&ue(te,b[2]),(!G||H&4)&&ue(be,b[2]),(!G||H&1&&oe!==(oe="resetdialog"+(b[0]?" show":"")+" svelte-96j2t6"))&&N(B,"class",oe)},i(b){G||($(r.$$.fragment,b),$(s.$$.fragment,b),$(c.$$.fragment,b),$(l.$$.fragment,b),$(u.$$.fragment,b),$(g.$$.fragment,b),$(w.$$.fragment,b),$(k.$$.fragment,b),$(E.$$.fragment,b),$(J.$$.fragment,b),$(T.$$.fragment,b),G=!0)},o(b){re(r.$$.fragment,b),re(s.$$.fragment,b),re(c.$$.fragment,b),re(l.$$.fragment,b),re(u.$$.fragment,b),re(g.$$.fragment,b),re(w.$$.fragment,b),re(k.$$.fragment,b),re(E.$$.fragment,b),re(J.$$.fragment,b),re(T.$$.fragment,b),G=!1},d(b){b&&ee(n),le(r),le(s),le(c),le(l),le(u),le(g),le(w),le(k),le(E),le(J),le(T),b&&ee(ae),b&&ee(B),ze=!1,ke(Me)}}}function Ln(e,n,t){let r,o;j(e,Pe,f=>t(1,r=f)),j(e,ot,f=>t(2,o=f));let s=!1;function i(){t(0,s=!0),window.addEventListener("mouseup",_)}function c(){t(0,s=!1),window.removeEventListener("mouseup",_)}function _(f){c()}function l(){cn(),c()}return[s,r,o,i,c,l]}class Sn extends Ze{constructor(n){super(),He(this,n,Ln,kn,Ce,{})}}function Et(e,n,t){const r=e.slice();return r[28]=n[t],r}function kt(e){let n,t;return n=new _n({props:{pid:e[28].id,type:e[28].type,gridx:e[28].gx,gridy:e[28].gy}}),{c(){de(n.$$.fragment)},m(r,o){ie(n,r,o),t=!0},p(r,o){const s={};o&4&&(s.pid=r[28].id),o&4&&(s.type=r[28].type),o&4&&(s.gridx=r[28].gx),o&4&&(s.gridy=r[28].gy),n.$set(s)},i(r){t||($(n.$$.fragment,r),t=!0)},o(r){re(n.$$.fragment,r),t=!1},d(r){le(n,r)}}}function zn(e){let n,t,r,o,s,i,c,_,l,f=e[2],u=[];for(let g=0;g<f.length;g+=1)u[g]=kt(Et(e,f,g));const v=g=>re(u[g],1,1,()=>{u[g]=null});return i=new Sn({}),{c(){n=y("div"),t=y("div"),o=x();for(let g=0;g<u.length;g+=1)u[g].c();s=x(),de(i.$$.fragment),N(t,"class","background nodrag svelte-1wvpcpf"),p(t,"cursor",e[0]?"move":"auto"),$e(()=>e[6].call(t)),N(n,"class","canvas svelte-1wvpcpf"),N(n,"draggable","false")},m(g,S){se(g,n,S),d(n,t),r=Gt(t,e[6].bind(t)),d(n,o);for(let w=0;w<u.length;w+=1)u[w].m(n,null);d(n,s),ie(i,n,null),c=!0,_||(l=[fe(t,"mousedown",e[3]),fe(t,"touchstart",e[4])],_=!0)},p(g,[S]){if((!c||S&1)&&p(t,"cursor",g[0]?"move":"auto"),S&4){f=g[2];let w;for(w=0;w<f.length;w+=1){const X=Et(g,f,w);u[w]?(u[w].p(X,S),$(u[w],1)):(u[w]=kt(X),u[w].c(),$(u[w],1),u[w].m(n,s))}for(Qt(),w=f.length;w<u.length;w+=1)v(w);Kt()}},i(g){if(!c){for(let S=0;S<f.length;S+=1)$(u[S]);$(i.$$.fragment,g),c=!0}},o(g){u=u.filter(Boolean);for(let S=0;S<u.length;S+=1)re(u[S]);re(i.$$.fragment,g),c=!1},d(g){g&&ee(n),r(),It(u,g),le(i),_=!1,ke(l)}}}function Lt(e,n){const t=e.clientX-n.clientX,r=e.clientY-n.clientY;return Math.sqrt(t*t+r*r)}function Mn(e,n,t){let r,o,s,i,c,_;j(e,We,m=>t(14,r=m)),j(e,Ye,m=>t(15,o=m)),j(e,Te,m=>t(16,s=m)),j(e,Xe,m=>t(5,i=m)),j(e,tt,m=>t(1,c=m)),j(e,Le,m=>t(2,_=m));let l,f,u=!1,v,g,S,w;function X(m){l=m.clientX,f=m.clientY,t(0,u=!0),window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)}function k(m){if(m.preventDefault(),m.touches.length<2)return;ne(We,r=!0,r),t(0,u=!1),v=i;const q=m.touches[0],A=m.touches[1];S=(q.clientX+A.clientX)/2,w=(q.clientY+A.clientY)/2,g=Lt(q,A),window.addEventListener("touchmove",D),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function z(m){if(m.touches.length>1)return;m.preventDefault();const q=m.touches[0];l=q.clientX,f=q.clientY,t(0,u=!0),window.addEventListener("touchmove",D),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function E(m){const q=m.clientX-l,A=m.clientY-f;l=m.clientX,f=m.clientY,T(q,A)}function O(m){const q=(S-s)/(Ne*i),A=(w-o)/(Ne*i);ne(Te,s=S-q*(Ne*v*m),s),ne(Ye,o=w-A*(Ne*v*m),o),ne(Xe,i=v*m,i)}function J(m){S=m.clientX,w=m.clientY;let q=-.001*m.deltaY;v=i,q>.1&&(q=.1),q<-.1&&(q=-.1),O(1+q)}function D(m){if(m.preventDefault(),r){if(m.touches.length<2)return;const V=m.touches[0],K=m.touches[1],R=Lt(V,K);O(R/g);return}const q=m.touches[0],A=q.clientX-l,Q=q.clientY-f;l=q.clientX,f=q.clientY,T(A,Q)}function T(m,q){ne(Te,s+=m,s),ne(Ye,o+=q,o)}function C(m){t(0,u=!1),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)}function Y(m){m.preventDefault(),ne(We,r=!1,r),t(0,u=!1),window.removeEventListener("touchmove",D),window.removeEventListener("touchcancel",Y),window.removeEventListener("touchend",Y)}function I(){window.addEventListener("touchstart",k),window.addEventListener("wheel",J)}function L(){window.removeEventListener("touchstart",k),window.removeEventListener("wheel",J)}jt(I),Ht(L);function M(){c=this.clientHeight,tt.set(c)}return e.$$.update=()=>{e.$$.dirty&32},[u,c,_,X,z,i,M]}class Nn extends Ze{constructor(n){super(),He(this,n,Mn,zn,Ce,{})}}function On(e){let n,t,r;return t=new Nn({}),{c(){n=y("main"),de(t.$$.fragment)},m(o,s){se(o,n,s),ie(t,n,null),r=!0},p:ge,i(o){r||($(t.$$.fragment,o),r=!0)},o(o){re(t.$$.fragment,o),r=!1},d(o){o&&ee(n),le(t)}}}class qn extends Ze{constructor(n){super(),He(this,n,null,On,Ce,{})}}new qn({target:document.getElementById("app")});
